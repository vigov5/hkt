<?php use Phalcon\Tag;

/**
 * @var Users $current_user
 */
?>
<div class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
    <div class="container">
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav">
                <li class="<?= $current_page === 'index' ? 'active' : '' ?>">
                    <a href="<?= $this->url->get('') ?>" class="navbar-brand">
                        <span class="fa fa-home"></span>
                        HKT
                    </a>
                </li>
            <?php if(isset($current_user)): ?>
                <li class="<?= $current_page === 'shop' ? 'active' : '' ?>">
                    <a href="<?= $this->url->get('shop') ?>">
                        <span class="fa fa-shopping-cart"></span>
                        Shops
                    </a>
                </li>
                <li class="dropdown <?= $current_page === 'item' ? 'active' : '' ?>">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="fa fa-coffee"></span>
                        Items <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="<?= $this->url->get('item/onsale') ?>"><span class="fa fa-edit"></span>Items</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="<?= $this->url->get('item/create') ?>"><span class="fa fa-edit"></span>Create New</a>
                        </li>
                    </ul>
                </li>
                <li class="<?= $current_page === 'contact' ? 'active' : '' ?>">
                    <a href="<?= $this->url->get('contact') ?>">
                        <span class="fa fa-envelope"></span>
                        Contact
                    </a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown <?= $current_page === 'setting' ? 'active' : '' ?>">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="fa fa-cog"></span>
                        Setting (<?= $current_user->getRoleValue() ?>) <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <?php if ($current_user->role >= Users::ROLE_ADMIN): ?>
                        <li>
                            <a href="<?= $this->url->get('setting') ?>">
                                Admin Setting
                            </a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('setting') ?>">
                                Users
                            </a>
                        </li>
                        <?php endif; ?>
                    </ul>
                </li>
                <li class="dropdown <?= $current_page === 'user' ? 'active' : '' ?>">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="fa fa-user"></span>
                        <?= $current_user->username ?> ! <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="<?= $this->url->get('request/sentrequests') ?>"><span class="fa fa-edit"></span>Sent Requests</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('request/receivedrequests') ?>"><span class="fa fa-edit"></span>Received Request</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('item/my') ?>"><span class="fa fa-edit"></span>My items</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('user/changepassword') ?>"><span class="fa fa-edit"></span>Change Password</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('user/logout') ?>"><span class="fa fa-power-off"></span>Log out</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown <?= $current_page === 'wallet' ? 'active' : '' ?>">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="fa fa-dollar"></span>:
                        <?= $current_user->wallet ?> hkt <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="<?= $this->url->get('item/special/1') ?>">Deposit</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('item/special/2') ?>">Withdraw</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('invoice/sentinvoices') ?>">Sent Invoices</a>
                        </li>
                        <li>
                            <a href="<?= $this->url->get('invoice/receivedinvoices') ?>">Received Invoices</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <?php else: ?>
                <form class="navbar-form navbar-left" role="login" action="/user/login" method="post">
                    <div class="form-group">
                        <?= $login_form->render('email', ['class' => 'form-control', 'placeholder' => 'email/username']) ?>
                    </div>
                    <div class="form-group">
                        <?= $login_form->render('password', ['class' => 'form-control', 'placeholder' => 'password']) ?>
                    </div>
                    <button type="submit" class="btn btn-success"><span class="fa fa-sign-in"></span>Submit</button>
                </form>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li class="<?= $current_page === 'facebook' ? 'active' : '' ?>">
                    <a href="<?= $this->facebook->getLoginUrl(['scope' => $this->config->facebook->scope, 'redirect_uri' => $this->url->get('user/facebook')]) ?>">
                        <span class="fa"></span>
                        Facebook Login
                    </a>
                </li>
                <li class="<?= $current_page === 'register' ? 'active' : '' ?>">
                    <a href="<?= $this->url->get('user/register') ?>">
                        <span class="fa fa-plus-circle"></span>
                        Register
                    </a>
                </li>
                <li class="<?= $current_page === 'forgotpassword' ? 'active' : '' ?>">
                    <a href="<?= $this->url->get('user/forgotpassword') ?>">
                        <span class="fa fa-meh-o"></span>
                        Password Recovery
                    </a>
                </li>
            </ul>
            <?php endif; ?>
        </nav>
    </div>
</div>